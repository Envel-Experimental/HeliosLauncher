name: "Jules Interactive Bot"

on:
  issue_comment:
    types: [created]

jobs:
  jules-chat:
    if: github.event.issue.pull_request && contains(github.event.comment.body, '@jules')
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      
      - name: Invoke Jules
        uses: google-labs-code/jules-invoke@main
        with:
          jules_api_key: ${{ secrets.JULES_API_KEY }}
          include_last_commit: true
          prompt: |
            You are a senior software engineer (Jules Agent).
            A user mentioned you in a PR comment: "${{ github.event.comment.body }}"
            
            Task:
            1. If they ask for "/review", analyze all PR changes for bugs, performance, and security.
            2. If they ask to "fix" or "refactor", implement the changes in the cloud VM and push a new commit.
            3. Use 2026 coding standards and best practices.
            
            Requirements:
            - Professional tone.
            - Concise actionable feedback.
            - Language: English.
