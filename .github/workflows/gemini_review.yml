name: "Gemini Interactive Bot"

on:
  workflow_dispatch:
  issue_comment:
    types: [created]

jobs:
  gemini_chat:
    if: |
      github.event.issue.pull_request &&
      (contains(github.event.comment.body, '@gemini') || startsWith(github.event.comment.body, '/'))
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      issues: write
    steps:
      - uses: actions/checkout@v4
      - name: Gemini 3 Flash Response
        uses: google-github-actions/run-gemini-cli@v2
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
          model: "gemini-3-flash"
          thinking_level: "high" 
          prompt: |
            You are a helpful AI engineer. A user mentioned you in a PR comment.
            Context: ${{ github.event.comment.body }}
            
            Instructions:
            1. If they say "hello" or just mention you, greet them warmly and ask how you can help.
            2. If they use "/review", perform a full code review of the PR diff.
            3. If they ask a specific question about the code, answer it using the current PR context.
            
